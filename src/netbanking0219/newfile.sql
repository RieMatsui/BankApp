SET SESSION FOREIGN_KEY_CHECKS=0;

/* Drop Tables */

DROP TABLE IF EXISTS TMP_T_M_BANK_USER;
DROP TABLE IF EXISTS T_AGE_CONSTRAINT;
DROP TABLE IF EXISTS T_USER;
DROP TABLE IF EXISTS T_BANK_BRANCH;
DROP TABLE IF EXISTS T_SUBJECT;




/* Create Tables */

CREATE TABLE TMP_T_M_BANK_USER
(
	USER_ID varchar(10) NOT NULL,
	USER_PW varchar(10) NOT NULL,
	PERSONAL_SEI varchar(10) NOT NULL,
	PERSONAL_MEI varchar(10) NOT NULL,
	USER_BIRTHDAY varchar(7) NOT NULL,
	-- 口座番号
	ACCOUNT_NO int(7) NOT NULL COMMENT '口座番号',
	CREATE_DATE timestamp NOT NULL,
	CREATE_USER varchar(10) NOT NULL,
	SUBJECT_ID varchar(1) NOT NULL,
	BRANCH_ID varchar(3) NOT NULL,
	PRIMARY KEY (USER_ID)
);


CREATE TABLE T_AGE_CONSTRAINT
(
	AGE_CONST_ID varchar(5) NOT NULL,
	AGE_CONST_DATE int(2),
	CREATE_DATE timestamp,
	CREATE_USER varchar(10),
	PRIMARY KEY (AGE_CONST_ID)
);


CREATE TABLE T_BANK_BRANCH
(
	BRANCH_ID varchar(3) NOT NULL,
	BRANCH_NAME varchar(40) NOT NULL,
	CREATE_DATE timestamp NOT NULL,
	CREATE_USER varchar(10) NOT NULL,
	PRIMARY KEY (BRANCH_ID)
);


CREATE TABLE T_SUBJECT
(
	SUBJECT_ID varchar(1) NOT NULL,
	SUBJECT_NAME int(4),
	CREATE_DATE timestamp,
	CREATE_USER varchar(10),
	PRIMARY KEY (SUBJECT_ID)
);


CREATE TABLE T_USER
(
	USER_ID varchar(10) NOT NULL,
	USER_PW varchar(10) NOT NULL,
	USER_BIRTHDAY varchar(7) NOT NULL,
	-- 口座番号
	ACCOUNT_NO int(7) NOT NULL COMMENT '口座番号',
	CREATE_DATE timestamp NOT NULL,
	CREATE_USER varchar(10) NOT NULL,
	SUBJECT_ID varchar(1) NOT NULL,
	BRANCH_ID varchar(3) NOT NULL,
	PRIMARY KEY (USER_ID)
);



/* Create Foreign Keys */

ALTER TABLE T_USER
	ADD FOREIGN KEY (BRANCH_ID)
	REFERENCES T_BANK_BRANCH (BRANCH_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE T_USER
	ADD FOREIGN KEY (SUBJECT_ID)
	REFERENCES T_SUBJECT (SUBJECT_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;



